import React, { useState,useEffect } from 'react';
import axios from 'axios';
import './alert.scss';

const listeAlert=()=>{
    const [data,setData]=useState([]);
      useEffect(()=>{
        axios.get("http://localhost:3300/api/avertissements/listeAlert").then((response)=>{
          setData(response.data.result);
      })
      },[]);
         
      return(<div className="page-listeavertissements">
        <div className="container page">
          <h1 class="title-Liste">Veuillez consulter la liste des avertissements </h1>
          <div className="container">
            <div className="col">
            {data.map((alert)=>(
              
              <div className="row card p-4 mt-3" id={alert.idAlert} key={alert.idAlert} name={alert.libelleAlert}>
                    <h1 class="title-Row"><strong>{alert.libelleAlert}</strong></h1>
                  <p><b>Date :</b>{new Date(alert.date).toLocaleDateString('fr')}</p>
                  <p><b>Etat de l'alerte :</b> {alert.libelleAlertEtat}</p>
                  <p><b>Niveaue de l'alerte:</b> {alert.libelleEtat}</p>
                  <a class="btn btn-danger" href="/formdelete">Suppression de la mission nÂ°{alert.idAlert}</a>
                 
              </div>
           ))}
          </div>
          <br />
          <a class="btn btn-success" href="/formAjout">Ajouter un nouvel avertissement</a><br/>
          </div>
          </div>
      </div>);
}

export default listeAlert;
